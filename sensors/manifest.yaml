apiVersion: servicebinding.io/v1alpha3
kind: ServiceBinding
metadata:
  name: sensors-rmq
spec:
  service:
    apiVersion: rabbitmq.com/v1beta1
    kind: RabbitmqCluster
    name: rabbitmqcluster-sample
  workload:
    apiVersion: serving.knative.dev/v1
    kind: Service
    name: sensors
---
apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: sensors
  labels:
    carto.run/workload-name: sensors
    app.kubernetes.io/component: run
spec:
  template:
    metadata:
      annotations:
        autoscaling.knative.dev/minScale: 1
    spec:
      containers:
      - name: workload
        image: harbor.vrabbi.cloud/workloads/oss-sensors@sha256:210e8f09ecde8a381e360cc5dda96c0e8b02740d1b9ef9e816c54ba488d60a6a
        securityContext:
          runAsUser: 1000
      imagePullSecrets:
      - name: registry-credentials

